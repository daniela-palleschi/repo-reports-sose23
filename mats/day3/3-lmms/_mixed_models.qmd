---
title: "Linear Regression 3"
subtitle: "Linear mixed models (LMMs)"
author: "Daniela Palleschi"
institute: Humboldt-Universit√§t zu Berlin
footer: "Simple Linear Regression"
lang: en
date: 2023-04-13
format:
  revealjs: 
    output-file: slides-mixed_models.html
    theme: [dark]
    width: 1600
    height: 900
    progress: true
    # smaller: true
    scrollable: true
    slide-number: c/t
    code-link: true
    code-overflow: wrap
    code-tools: true
    code-annotations: below
    # logo: logos/hu_logo.png
    # css: logo.css
    incremental: true
    # number-sections: true
    toc: true
    toc-depth: 1
    toc-title: 'Topics'
    navigation-mode: linear
    controls-layout: bottom-right
    fig-cap-location: top
    font-size: 0.6em
    slide-level: 4
    chalkboard: true
    title-slide-attributes: 
      data-background-image: logos/logos.tif
      data-background-size: 15%
      data-background-position: 50% 92%
  html:
    self-contained: true
    output-file: sheet-mixed_models.html
    theme: [dark]
    number-sections: true
    toc: true
    code-overflow: wrap
    code-tools: true
  pdf:
    output-file: pdf-mixed_models.pdf
    toc: true
    number-sections: false
    colorlinks: true
    code-overflow: wrap
editor_options: 
  chunk_output_type: console
bibliography: references/references.json
csl: references/apa.csl
---

```{r}
knitr::opts_chunk$set(eval = T, # change this to 'eval = T' to reproduce the analyses; make sure to comment out
                      echo = T, # 'print code chunk?'
                      message = F, # 'print messages (e.g., warnings)?'
                      error = F,
                      warning = F)
```

```{r}
## play sound if error encountered
### from: https://sejohnston.com/2015/02/24/make-r-beep-when-r-markdown-finishes-or-when-it-fails/
options(error = function(){    # Beep on error
  beepr::beep(sound = "wilhelm")
  Sys.sleep(2) # 
  }
 )
## and when knitting is complete
.Last <- function() {          # Beep on exiting session
  beepr::beep(sound = "ping")
  Sys.sleep(6) # allow to play for 6 seconds
  }
```

```{r, eval = T, cache = F}
# Create references.json file based on the citations in this script
# make sure you have 'bibliography: references.json' in the YAML
rbbt::bbt_update_bib("_mixed_models.qmd")
```

# Set-up environment

```{r}
# suppress scientific notation
options(scipen=999)

# load libraries
library(tidyverse)
library(ggplot2)
library(broom)
```

```{r}
# load in dataset
df_crit_verb <- readr::read_csv(here::here("data/tidy_data_lifetime_pilot.csv"), 
                               # for special characters
                               locale = readr::locale(encoding = "latin1") 
                               ) |> 
  mutate_if(is.character,as.factor) |> # all character variables as factor
  filter(type == "critical", # only critical trials
         px != "px3", # px3 had a lot of missing values
         region == "verb") # critical region only
```

# Linear Regression 1 and 2: Recap

# (Linear) Mixed models

- linear mixed-effects models (LMEMs)
- linear mixed models (LMMs)
- hierarchical models
- hierarchical linear regression
- etc., etc...

## When to use LMMs

- when data are non-independent
  + i.e., when you have *grouping* factors
  + i.e., in repeated measures design
  + i.e., when you have multiple data points per e.g., participant and/or item

## What is 'mixed'?

- fixed effects and random effects

Fixed effects
- independent variables
- systematic variability

Random effects
- random variability

@winter_very_2014